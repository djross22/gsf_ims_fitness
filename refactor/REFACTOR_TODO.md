# BarSeqFitnessFrame Refactoring TODO List

## Goal
Convert from object-oriented design to functional design:
- Remove object state (self.attributes) â†’ YAML manifest state management
- Change signatures from `def method(self, ...)` â†’ `def method_func(manifest, data, ...)`

## Functions to Refactor

- [x] 1. **__init__** â†’ `load_barseq_data(manifest, notebook_dir=None, experiment=None, ...)` âœ…
- [x] 2. **find_growth_plate_layout_file** â†’ `find_growth_plate_layout_file(manifest, data_directory=None)` âœ…
- [x] 3. **set_ref_samples** â†’ `set_ref_samples(manifest, ref_samples)` âœ…
- [x] 4. **trim_and_sum_barcodes** â†’ `trim_and_sum_barcodes(manifest, data, cutoff=None, ...)` âœ…
- [x] 5. **label_reference_sequences** â†’ `label_reference_sequences(manifest, data, ref_seq_file_path=None, ...)` âœ…
- [x] 6. **mark_chimera_parents** â†’ `mark_chimera_parents(manifest, data)` âœ…
- [x] 7. **flag_possible_chimeras** â†’ `flag_possible_chimeras(manifest, data, use_faster_search=True, ...)` âœ…
- [x] 8. **mark_actual_chimeras** â†’ `mark_actual_chimeras(manifest, data, chimera_cut_line, ...)` âœ…
- [x] 9. **stan_barcode_slope** â†’ `stan_barcode_slope(manifest, data, ...)` âœ…
- [x] 10. **display_viewable_plate_layouts** â†’ `display_viewable_plate_layouts(manifest, data)` âœ…
- [x] 11. **set_sample_plate_map** â†’ `set_sample_plate_map(manifest, data, ignore_samples=[], ...)` âœ…
- [x] 12. **stan_barcode_slope_index** â†’ `stan_barcode_slope_index(manifest, data, ...)` âœ…
- [x] 13. **fit_barcode_slope** â†’ `fit_barcode_slope(manifest, data, ...)` âœ…
- [x] 14. **plot_count_ratio_per_sample** â†’ `plot_count_ratio_per_sample(manifest, data, ...)` âœ…
- [x] 15. **plot_or_fit_barcode_ratios** â†’ `plot_or_fit_barcode_ratios(manifest, data, ...)` âœ…
- [x] 16. **add_fitness_from_slopes** â†’ `add_fitness_from_slopes(manifest, data, ...)` âœ…
- [x] 17. **plot_fit_residuals** â†’ `plot_fit_residuals(manifest, data, initial=None, ...)` âœ…
- [x] 18. **set_fit_fitness_difference_params** â†’ `set_fit_fitness_difference_params(manifest, ...)` âœ…
- [x] 19. **stan_fitness_difference_curves** â†’ `stan_fitness_difference_curves(manifest, data, ...)` âœ…
- [x] 20. **stan_single_fitness_to_function** â†’ `stan_single_fitness_to_function(manifest, data, ...)` âœ…
- [x] 21. **stan_GP_curves** â†’ `stan_GP_curves(manifest, data, ...)` âœ…
- [x] 22. **merge_barcodes** â†’ `merge_barcodes(manifest, data, small_bc_index_list, ...)` âœ…
- [x] 23. **plot_count_hist** â†’ `plot_count_hist(manifest, data, hist_bin_max=None, ...)` âœ…
- [x] 24. **plot_read_counts** â†’ `plot_read_counts(manifest, data, save_plots=False, ...)` âœ…
- [x] 25. **plot_read_fractions** â†’ `plot_read_fractions(manifest, data, ...)` âœ…
- [x] 26. **plot_stdev** â†’ `plot_stdev(manifest, data, ...)` âœ…
- [x] 27. **plot_fitness_curves** â†’ `plot_fitness_curves(manifest, data, ...)` âœ…
- [x] 28. **get_fitness_columns_setup** â†’ `get_fitness_columns_setup(manifest, data, plot_initials)` âœ…
- [x] 29. **plot_dose_response** â†’ `plot_dose_response(manifest, data, ...)` âœ…
- [x] 30. **plot_fitness_and_difference_curves** â†’ `plot_fitness_and_difference_curves(manifest, data, ...)` âœ…
- [x] 31. **calibrate_fitness_difference_params** â†’ `calibrate_fitness_difference_params(manifest, data, ...)` âœ…
- [x] 32. **set_ramr_fitness_correction** â†’ `set_ramr_fitness_correction(manifest, data, resid_frame, ...)` âœ…
- [x] 33. **plot_count_ratios_vs_time** â†’ `plot_count_ratios_vs_time(manifest, data, plot_range=None, ...)` âœ…
- [x] 34. **plot_counts_vs_time** â†’ _Skipped (commented out in source)_
- [x] 35. **plot_chimera_plot** â†’ `plot_chimera_plot(manifest, data, ...)` âœ…
- [x] 36. **plot_hill_params** â†’ `plot_hill_params(manifest, data, input_frames, ...)` âœ…
- [x] 37. **save_as_pickle** â†’ `save_as_pickle(manifest, data, notebook_dir=None, ...)` âœ…
- [x] 38. **cleaned_frame** â†’ `cleaned_frame(manifest, data, count_threshold=3000, ...)` âœ…
- [x] 39. **plot_hill_param_density_scatter** â†’ `plot_hill_param_density_scatter(manifest, data, plot_frame=None, ...)` âœ…
- [x] 40. **bs_frame_stan_data** â†’ `bs_frame_stan_data(manifest, data, st_row, ...)` âœ…
- [x] 41. **get_default_initial** â†’ `get_default_initial(manifest)` âœ…

## Progress
- **Total**: 41 functions
- **Completed**: 41 âœ…
- **Remaining**: 0

## Status: COMPLETE! ðŸŽ‰

All functions have been successfully refactored from OOP to functional design. All `self` references have been replaced with explicit `manifest` and `data` parameters.
